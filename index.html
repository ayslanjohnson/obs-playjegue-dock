<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PlayJEGUE Stream Bar • Widget</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" crossorigin="anonymous">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <div class="bar-wrap">
      <div class="glow-ring" id="glowRing" style="display:none"></div>
      <div id="bar" class="stream-bar" role="region" aria-label="PlayJEGUE bar">
        <div class="logo-box" id="logoBox"><img id="barLogo" alt="logo" src="PLAY_JEGUE_LOGO_1x1.png"></div>
        <div id="barUser" class="user">@PlayJEGUE</div>
        <div class="counters" aria-live="polite">
          <div id="deathGroup" class="death-row">
            <i id="skullIcon" class="fa-solid fa-skull fa-skull" aria-hidden="true"></i>
            <div id="deathCount" class="counter" style="min-width:30px;text-align:right">0</div>
          </div>
          <div id="divider" class="divider"></div>
          <div id="trophyGroup" class="row" style="align-items:center">
            <img id="psTrophy" class="" src="trofeu.png" alt="trophy" style="width:25px;height:25px;object-fit:contain">
            <i id="xboxGem" class="fa-regular fa-gem fa-fw hidden" aria-hidden="true"></i>
            <div id="trophyCount" class="counter">0/1</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="panel" id="panel">
    <div class="row top-actions">
      <div class="lang">
        <label id="lblLang">Idioma</label>
        <select id="language">
          <option value="pt-BR">PT-BR</option>
          <option value="en">EN</option>
        </select>
      </div>
      <button id="copySource" class="btn">Copiar URL Source</button>
      <button id="copyDock" class="btn">Copiar URL Dock</button>
      <button id="exportBtn" class="btn">Exportar JSON</button>
      <button id="importBtn" class="btn">Importar JSON</button>
      <button id="refreshBtn" class="btn">Atualizar</button>
    </div>

    <div class="card" style="margin-bottom:12px">
  <label for="currentId">ID</label>
  <input id="currentId" type="text" readonly style="width:100%; background:#0f1117; border:1px solid #2b2f38; padding:6px; border-radius:6px; color:#fff" />
</div>

<div class="tabs">
      <button class="tab-btn active" data-tab="contadores">Contadores</button>
      <button class="tab-btn" data-tab="plataformas">Plataformas</button>
      <button class="tab-btn" data-tab="instrucoes">Instruções</button>
      <button class="tab-btn" data-tab="geral">Geral</button>
    </div>

    <!-- CONTADORES -->
    <div id="tab-contadores" class="tab active">
      <div class="card">
        <label>Mortes</label>
        <div class="row">
          <button class="btn small" id="dMinus">-</button>
          <input id="dInput" class="small" type="number" min="0" value="0" style="width:60px"/>
          <button class="btn small" id="dPlus">+</button>
          <button class="btn small" id="dReset">Zerar</button>
          <div style="width:10px"></div>
          <div class="toggle on" id="toggleDeath"></div><label style="margin-left:6px">Mostrar Mortes</label>
        </div>
      </div>
      <div class="card" style="margin-top:8px">
        <label>Troféus (Atual / Platina)</label>
        <div class="row" style="align-items:center">
          <button class="btn small" id="tMinus">-</button>
          <input id="tCurrent" class="small" type="number" min="0" value="0" style="width:60px"/>
          <button class="btn small" id="tPlus">+</button>
          <div style="width:8px"></div>
          <button class="btn small" id="mMinus">-</button>
          <input id="tMax" class="small" type="number" min="1" value="1" style="width:60px"/>
          <button class="btn small" id="mPlus">+</button>
          <button class="btn small" id="tReset">Zerar</button>
          <div style="width:10px"></div>
          <div class="toggle on" id="toggleTrophy"></div><label style="margin-left:6px">Mostrar Troféus</label>
        </div>
      </div>
    </div>

    <!-- PLATAFORMAS -->
    <div id="tab-plataformas" class="tab">
      <div class="card">
        <label>Usuário global (aplica na sub-aba ativa)</label>
        <div class="row">
          <input id="globalUser" type="text" placeholder="@usuario"/>
          <button id="applyAll" class="btn">Aplicar</button>
        </div>

        <div class="subtabs">
          <button class="sub-btn active" data-sub="principais">Principais</button>
          <button class="sub-btn" data-sub="consoles">Consoles</button>
          <button class="sub-btn" data-sub="redes">Redes</button>
          <button class="sub-btn" data-sub="custom">Custom</button>
        </div>

        <div class="platform-list" id="platformList"></div>
      </div>
    </div>

    <!-- INSTRUÇÕES -->
    <div id="tab-instrucoes" class="tab">
      <div class="card">
        <label>OBS</label>
        <div style="color:#b9bcc6;line-height:1.8">
          <ul style="margin:0 0 0 18px;padding:0;list-style:disc">
            <li>Source (barra): use a URL <strong>sem parâmetros</strong>. Ela já carrega/gera um <strong>id</strong> automaticamente.</li>
            <li>Dock (controles): use <code>?dock=true</code> na mesma URL. O <strong>id</strong> deve ser o mesmo do Source.</li>
            <li>Os botões acima já copiam as URLs corretas, incluindo <code>&id=</code>.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- GERAL -->
    <div id="tab-geral" class="tab">
      <div class="card">
        <label>Plataforma principal de console</label>
        <select id="mainConsole">
          <option value="playstation">PlayStation</option>
          <option value="xbox">Xbox</option>
        </select>
      </div>
      <div class="card">
        <label>Propriedades da barra</label>
        <div class="row" style="align-items:center;">
          <div style="min-width:120px"><label>Largura (px)</label><input id="barW" class="slider" type="range" step="5" min="350" max="1920" value="450"><span id="barWVal">450</span></div>
          <div style="min-width:120px"><label>Altura (px)</label><input id="barH" class="slider" type="range" min="35" max="100" value="50"><span id="barHVal">50</span></div>
          <div style="min-width:120px"><label>Cantos (px)</label><input id="barR" class="slider" type="range" min="1" max="50" value="50"><span id="barRVal">50</span></div>
          <div style="min-width:120px"><label>Transparência</label><input id="barAlpha" class="slider" type="range" min="0" max="1" step="0.01" value="1"><span id="barAlphaVal">0</span></div>
        </div>
        <div style="margin-top:8px" class="row">
          <button id="applyStyle" class="btn small">Aplicar</button>
          <button id="defaultStyle" class="btn small">Padrão</button>
        </div>
      </div>
      <div class="card">
        <label>Logo-box</label>
        <div class="row" style="align-items:center;">
          <div style="display:flex;align-items:center;gap:8px"><div id="logoToggle" class="toggle on"></div><span>Habilitar</span></div>
          <div><label>Tamanho</label><input id="logoSize" type="range" min="65" max="160" value="65"><span id="logoSizeVal">65</span></div>
          <div>
            <label>Cor de fundo</label>
            <select id="logoColor">
              <option value="auto">Automática (cor da plataforma)</option>
              <option value="custom">Personalizada</option>
            </select>
            <input id="logoBgPicker" type="color" value="#ffffff" title="Cor personalizada">
          </div>
          <div style="display:flex;align-items:center;gap:8px"><div id="logoBorderToggle" class="toggle on"></div><span>Borda visível</span></div>
          <div><label>Espessura</label><input id="logoBorderWidth" type="range" min="1" max="5" value="1"><span id="logoBorderWidthVal">1</span></div>
          <div><label>Cor</label><input id="logoBorderColor" type="color" value="#ffffff"></div>
          <div><label>Raio</label><input id="logoRadius" type="range" min="1" max="50" value="15"><span id="logoRadiusVal">999</span></div>
        </div>
      </div>
      <div class="card" hidden>
        <label>Glow e Sombra</label>
        <div class="row" style="align-items:center;">
          <div style="display:flex;align-items:center;gap:8px"><div id="toggleGlow" class="toggle"></div><span>Glow animado</span></div>
          <div><label>Cor do Glow</label><input id="glowColor" type="color" value="#6c5ce7"></div>
          <div><label>Sombra</label><input id="shadowAmt" type="range" min="0" max="1" step="0.05" value="0.4"><span id="shadowVal">0.4</span></div>
        </div>
      </div>
      <div class="card" style="margin-top:8px">
        <button id="resetAll" class="btn">Resetar tudo para o padrão</button>
      </div>
    </div>
  </div>

  <footer>
    <div style="line-height:1.6">Widget PlayJEGUE — Propriedades: Widget URL <a href="#" target="_blank">playjegue.vercel.app</a></div>
    <div style="line-height:1.4">&copy; <span id="year"></span> PlayJEGUE — Código desta página licenciado para PlayJEGUE.</div>
  </footer>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>
</body>
</html>