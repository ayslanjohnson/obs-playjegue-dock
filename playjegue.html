<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barra Animada para Lives</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .stream-bar {
            width: 100%;
            max-width: 450px;
            min-width: 300px;
            height: 50px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            position: relative;
            overflow: visible;
            transition: background 0.8s ease-in-out;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .stream-bar.instagram {
            background: linear-gradient(90deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        .stream-bar.discord {
            background: linear-gradient(90deg, #7289da 0%, #677bc4 100%);
        }

        .stream-bar.twitch {
            background: linear-gradient(90deg, #9146ff 0%, #7c3aed 100%);
        }

        .stream-bar.youtube {
            background: linear-gradient(90deg, #ff0000 0%, #cc0000 100%);
        }

        .logo-container {
            width: 40px;
            height: 40px;
            margin-left: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            position: relative;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .logo-container.animate {
            transform: scale(1.6) translateY(-12px);
        }

        .logo {
            width: 28px;
            height: 28px;
            fill: white;
        }

        .username {
            flex: 1;
            text-align: left;
            color: white;
            font-weight: bold;
            font-size: 17px;
            margin-left: 8px;
        }

        .counters-section {
            display: flex;
            align-items: center;
            margin-right: 10px;
            gap: 15px;
        }

        .counter-group {
            display: flex;
            align-items: center;
            padding: 5px 8px;
        }

        .trophy-icon {
            width: 26px;
            height: 26px;
            fill: #ffd700;
            margin-right: 8px;
        }

        .skull-icon {
            width: 26px;
            height: 26px;
            fill: #ff4444;
            margin-right: 8px;
        }

        .counter {
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: transform 0.3s ease, color 0.2s ease;
        }

        .counter.animate {
            transform: scale(1.2);
        }

        .trophy-counter.animate {
            color: #ffd700;
        }

        .death-counter.animate {
            color: #ff4444;
        }

        .divider {
            width: 2px;
            height: 30px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 1px;
        }

        .instructions {
            margin-top: 40px;
            color: #888;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .controls-section {
            margin-top: 30px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            color: white;
        }

        /* Responsividade para OBS Dock */
        @media (max-width: 768px) {
            .stream-bar {
                max-width: 100%;
                min-width: 250px;
            }
            
            .username {
                font-size: 15px;
            }
            
            .counter {
                font-size: 16px;
            }
            
            .controls-section {
                padding: 15px;
            }
            
            .platform-controls {
                grid-template-columns: 1fr;
            }
            
            .counter-controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .trophy-inputs {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        @media (max-width: 400px) {
            .stream-bar {
                min-width: 200px;
                height: 45px;
            }
            
            .logo-container {
                width: 35px;
                height: 35px;
                margin-left: 10px;
            }
            
            .logo {
                width: 24px;
                height: 24px;
            }
            
            .username {
                font-size: 14px;
                margin-left: 6px;
            }
            
            .trophy-icon, .skull-icon {
                width: 22px;
                height: 22px;
            }
            
            .counter {
                font-size: 15px;
            }
            
            .counters-section {
                gap: 10px;
                margin-right: 8px;
            }
        }

        /* Otimização para OBS Browser Source */
        body.obs-mode {
            padding: 0;
            background: transparent;
            min-height: auto;
        }
        
        body.obs-mode .controls-section,
        body.obs-mode .instructions,
        body.obs-mode .copyright {
            display: none;
        }

        /* Modo Dock para OBS */
        body.dock-mode {
            padding: 10px;
            background: #2c2c2c;
            min-height: auto;
        }
        
        body.dock-mode .stream-bar,
        body.dock-mode .instructions {
            display: none;
        }
        
        body.dock-mode .controls-section {
            max-width: 300px;
            margin: 0;
            background: rgba(0, 0, 0, 0.9);
        }

        .controls-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #ffd700;
        }

        .tabs-container {
            margin-bottom: 20px;
        }

        .tabs-nav {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 15px;
        }

        .tab-button {
            flex: 1;
            padding: 10px 8px;
            background: transparent;
            color: #ccc;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tab-button.active {
            background: #007AFF;
            color: white;
        }

        .tab-button:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .control-group {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .control-group h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #ccc;
        }

        .platform-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .platform-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }

        .platform-logo {
            width: 20px;
            height: 20px;
            fill: white;
            flex-shrink: 0;
        }

        .platform-name {
            font-weight: bold;
            min-width: 80px;
            font-size: 14px;
            display: none;
        }

        .username-input {
            flex: 1;
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }

        .username-input::placeholder {
            color: #888;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 28px;
            background: #333;
            border-radius: 14px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #007AFF;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 12px;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(22px);
        }

        .counter-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .counter-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .counter-btn {
            min-width: 32px;
            height: 32px;
            padding: 0 8px;
            border: none;
            border-radius: 6px;
            background: #444;
            color: white;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            white-space: nowrap;
        }

        .counter-btn.icon-only {
            width: 32px;
            padding: 0;
            font-size: 18px;
        }

        .counter-btn:hover {
            background: #555;
        }

        .counter-btn:active {
            background: #333;
        }

        .counter-input {
            width: 60px;
            padding: 6px 8px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            font-size: 14px;
        }

        .trophy-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-label {
            font-size: 12px;
            color: #aaa;
        }

        .copyright {
            margin-top: 30px;
            text-align: center;
            color: #666;
            font-size: 12px;
        }

        .global-username {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }

        .global-username-input {
            width: calc(100% - 24px);
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            margin-bottom: 8px;
            box-sizing: border-box;
        }

        .apply-all-btn {
            width: 100%;
            padding: 8px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .apply-all-btn:hover {
            background: #0056b3;
        }

        .add-platform-section {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border: 2px dashed #444;
        }

        .add-platform-form {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .add-platform-input {
            padding: 6px 8px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 12px;
        }

        .add-platform-btn {
            padding: 8px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .add-platform-btn:hover {
            background: #1e7e34;
        }

        .remove-platform-btn {
            background: #dc3545 !important;
            margin-left: auto;
            min-width: 24px !important;
            height: 24px !important;
            font-size: 12px !important;
        }

        .remove-platform-btn:hover {
            background: #c82333 !important;
        }
    </style>
</head>
<body>
    <div class="stream-bar instagram" id="streamBar">
        <div class="logo-container" id="logoContainer">
            <svg class="logo" id="platformLogo" viewBox="0 0 24 24">
                <!-- Instagram Logo -->
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
        </div>

        <div class="username" id="username">@PlayJegueOficial</div>

        <div class="counters-section">
            <div class="counter-group">
                <svg class="skull-icon" viewBox="0 0 24 24">
                    <path d="M12 2C8.5 2 5.73 4.61 5.73 7.9c0 1.2.37 2.32 1 3.28L6 12c0 .55.45 1 1 1s1-.45 1-1l.73-.82c.97.64 2.11 1.02 3.27 1.02s2.3-.38 3.27-1.02L16 12c0 .55.45 1 1 1s1-.45 1-1l-.73-.82c.63-.96 1-2.08 1-3.28C18.27 4.61 15.5 2 12 2zM9 9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"/>
                    <path d="M12 14c-1.5 0-2.8.6-3.8 1.5-.2.2-.2.5 0 .7.9.9 2.1 1.4 3.8 1.4s2.9-.5 3.8-1.4c.2-.2.2-.5 0-.7-1-.9-2.3-1.5-3.8-1.5z"/>
                    <path d="M7 19c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2v-1H7v1z"/>
                </svg>
                <span class="counter death-counter" id="deathCounter">0</span>
            </div>
            
            <div class="divider"></div>
            
            <div class="counter-group">
                <svg class="trophy-icon" viewBox="0 0 100 100">
                    <!-- Base principal -->
                    <ellipse cx="50" cy="85" rx="20" ry="4" fill="#b8860b"/>
                    <rect x="30" y="80" width="40" height="8" rx="4" fill="#daa520"/>
                    
                    <!-- Haste central -->
                    <rect x="47" y="65" width="6" height="15" fill="#c0c0c0"/>
                    
                    <!-- Copa do troféu -->
                    <path d="M35 25 Q35 15 50 15 Q65 15 65 25 L65 50 Q65 65 50 65 Q35 65 35 50 Z" fill="url(#silverGrad)" stroke="#999" stroke-width="1"/>
                    
                    <!-- Alças laterais -->
                    <path d="M30 30 Q25 30 25 35 L25 40 Q25 45 30 45 L35 45 L35 35 Q32 30 30 30 Z" fill="#c0c0c0" stroke="#999" stroke-width="0.5"/>
                    <path d="M70 30 Q75 30 75 35 L75 40 Q75 45 70 45 L65 45 L65 35 Q68 30 70 30 Z" fill="#c0c0c0" stroke="#999" stroke-width="0.5"/>
                    
                    <!-- Detalhes dourados -->
                    <ellipse cx="50" cy="30" rx="8" ry="6" fill="#ffd700"/>
                    <rect x="42" y="40" width="16" height="3" rx="1.5" fill="#ffd700"/>
                    <rect x="45" y="50" width="10" height="2" rx="1" fill="#ffd700"/>
                    
                    <!-- Gradiente para efeito metálico -->
                    <defs>
                        <linearGradient id="silverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#f5f5f5;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#e0e0e0;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#c0c0c0;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
                <span class="counter trophy-counter" id="trophyCounter">0/41</span>
            </div>
        </div>
    </div>



    <div class="controls-section">
        <div class="controls-title">⚙️ SETUP PlayJEGUE</div>
        
        <div class="tabs-container">
            <div class="tabs-nav">
                <button class="tab-button active" data-tab="counters">🎯 Contadores</button>
                <button class="tab-button" data-tab="platforms">📱 Plataformas</button>
                <button class="tab-button" data-tab="instructions">📋 Instruções</button>
            </div>

            <!-- Aba Contadores -->
            <div class="tab-content active" id="counters">
                <div class="control-group">
                    <h3>💀 Contador de Mortes</h3>
                    <div class="counter-controls">
                        <div class="counter-item">
                            <button class="counter-btn icon-only" id="deathMinus">-</button>
                            <input type="number" class="counter-input" id="deathInput" value="0" min="0" max="999">
                            <button class="counter-btn icon-only" id="deathPlus">+</button>
                        </div>
                        <button class="counter-btn" id="deathReset" style="background: #ff4444;">Resetar</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>🏆 Contador de Troféus</h3>
                    <div class="counter-controls">
                        <div class="trophy-inputs">
                            <div class="counter-item">
                                <span class="input-label">Atual:</span>
                                <button class="counter-btn icon-only" id="trophyCurrentMinus">-</button>
                                <input type="number" class="counter-input" id="trophyCurrentInput" value="0" min="0" max="99">
                                <button class="counter-btn icon-only" id="trophyCurrentPlus">+</button>
                            </div>
                            <div class="counter-item">
                                <span class="input-label">Máximo:</span>
                                <button class="counter-btn icon-only" id="trophyMaxMinus">-</button>
                                <input type="number" class="counter-input" id="trophyMaxInput" value="41" min="0" max="99">
                                <button class="counter-btn icon-only" id="trophyMaxPlus">+</button>
                            </div>
                        </div>
                        <button class="counter-btn" id="trophyReset" style="background: #ffd700; color: #000;">Resetar</button>
                    </div>
                </div>
            </div>

            <!-- Aba Plataformas -->
            <div class="tab-content" id="platforms">
                <div class="control-group">
                    <h3>📱 Plataformas e Usuários</h3>
                    
                    <div class="global-username">
                        <input type="text" class="global-username-input" id="globalUsername" placeholder="Digite o usuário para aplicar em todas as plataformas">
                        <button class="apply-all-btn" id="applyAllBtn">Aplicar em Todas</button>
                    </div>
                    
                    <div class="platform-controls" id="platformControls">
                        <!-- Plataformas serão inseridas dinamicamente -->
                    </div>
                    
                    <div class="add-platform-section">
                        <div class="add-platform-form">
                            <input type="text" class="add-platform-input" id="newPlatformName" placeholder="Nome da plataforma (ex: TikTok)">
                            <input type="text" class="add-platform-input" id="newPlatformUser" placeholder="Usuário (ex: @usuario)">
                            <input type="text" class="add-platform-input" id="newPlatformColor" placeholder="Cor (ex: #ff0050)" value="#6c5ce7">
                            <button class="add-platform-btn" id="addPlatformBtn">+ Adicionar Plataforma</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba Instruções -->
            <div class="tab-content" id="instructions">
                <div class="control-group">
                    <h3>⌨️ Atalhos de Teclado</h3>
                    <div style="font-size: 12px; line-height: 1.6; color: #ccc;">
                        <strong>Troféus:</strong><br>
                        • CMD/CTRL + [ → Incrementar atual<br>
                        • CMD/CTRL + ] → Incrementar máximo<br>
                        • CMD/CTRL + \ → Resetar ambos<br><br>
                        
                        <strong>Mortes:</strong><br>
                        • CMD/CTRL + SHIFT + ] → Incrementar<br>
                        • CMD/CTRL + SHIFT + \ → Resetar
                    </div>
                </div>

                <div class="control-group">
                    <h3>🎥 Configuração no OBS</h3>
                    <div style="font-size: 12px; line-height: 1.6; color: #ccc;">
                        <strong>Para usar como Browser Source:</strong><br>
                        1. Adicione uma "Browser Source" no OBS<br>
                        2. Cole a URL atual + <code style="background: rgba(255,255,255,0.1); padding: 2px 4px; border-radius: 3px;">?obs=true</code><br>
                        3. Defina largura: 450px, altura: 70px<br><br>
                        
                        <strong>Para usar como Dock Customizado:</strong><br>
                        1. No OBS, vá em "Docks" → "Dock Customizado"<br>
                        2. Cole a URL atual + <code style="background: rgba(255,255,255,0.1); padding: 2px 4px; border-radius: 3px;">?dock=true</code><br>
                        3. Nomeie como "PlayJEGUE Controls"<br>
                        4. Agora você pode controlar tudo direto do OBS!<br><br>
                        
                        <strong>Sincronização:</strong><br>
                        • Mudanças no dock refletem automaticamente na tela<br>
                        • Funciona entre múltiplas abas/janelas<br>
                        • Dados são salvos localmente
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="copyright">
        © 2024 PlayJEGUE - Todos os direitos reservados<br>
        <button id="obsMode" style="margin-top: 10px; padding: 8px 16px; background: #007AFF; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; margin-right: 8px;">
            🎥 Modo OBS
        </button>
        <button id="dockMode" style="margin-top: 10px; padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">
            🔧 Modo Dock
        </button>
    </div>

    <script>
        // Verificar parâmetros URL
        const urlParams = new URLSearchParams(window.location.search);
        const isObsModeFromUrl = urlParams.get('obs') === 'true';
        const isDockModeFromUrl = urlParams.get('dock') === 'true';
        
        if (isObsModeFromUrl) {
            document.body.classList.add('obs-mode');
        }
        
        if (isDockModeFromUrl) {
            document.body.classList.add('dock-mode');
        }

        // Sistema de broadcast para sincronização entre abas
        const STORAGE_KEY = 'playjegue_stream_data';
        
        function broadcastUpdate(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify({
                ...data,
                timestamp: Date.now()
            }));
            
            // Disparar evento customizado para outras abas
            window.dispatchEvent(new CustomEvent('streamDataUpdate', { detail: data }));
        }
        
        function listenForUpdates() {
            // Escutar mudanças no localStorage (outras abas)
            window.addEventListener('storage', (e) => {
                if (e.key === STORAGE_KEY && e.newValue) {
                    const data = JSON.parse(e.newValue);
                    applyUpdatesFromBroadcast(data);
                }
            });
            
            // Escutar eventos na mesma aba
            window.addEventListener('streamDataUpdate', (e) => {
                applyUpdatesFromBroadcast(e.detail);
            });
        }
        
        function applyUpdatesFromBroadcast(data) {
            if (data.currentTrophy !== undefined) {
                currentTrophy = data.currentTrophy;
                document.getElementById('trophyCurrentInput').value = currentTrophy;
                updateTrophyCounter();
            }
            
            if (data.maxTrophy !== undefined) {
                maxTrophy = data.maxTrophy;
                document.getElementById('trophyMaxInput').value = maxTrophy;
                updateTrophyCounter();
            }
            
            if (data.deathCount !== undefined) {
                deathCount = data.deathCount;
                document.getElementById('deathInput').value = deathCount;
                updateDeathCounter();
            }
            
            if (data.platforms) {
                platforms.splice(0, platforms.length, ...data.platforms);
                if (!isDockModeFromUrl) {
                    renderPlatforms();
                }
            }
        }

        const platforms = [
            {
                name: 'instagram',
                username: '@PlayJegueOficial',
                enabled: true,
                logo: `<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>`
            },
            {
                name: 'discord',
                username: '@PlayJEGUE',
                enabled: true,
                logo: `<path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>`
            },
            {
                name: 'twitch',
                username: '@PlayJEGUE',
                enabled: true,
                logo: `<path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>`
            },
            {
                name: 'youtube',
                username: '@PlayJEGUE',
                enabled: true,
                logo: `<path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>`
            }
        ];

        let currentPlatformIndex = 0;
        let currentTrophy = 0;
        let maxTrophy = 41;
        let deathCount = 0;

        const streamBar = document.getElementById('streamBar');
        const username = document.getElementById('username');
        const platformLogo = document.getElementById('platformLogo');
        const logoContainer = document.getElementById('logoContainer');
        const trophyCounter = document.getElementById('trophyCounter');
        const deathCounter = document.getElementById('deathCounter');

        function getEnabledPlatforms() {
            return platforms.filter(p => p.enabled);
        }

        function updatePlatform() {
            const enabledPlatforms = getEnabledPlatforms();
            if (enabledPlatforms.length === 0) return;
            
            const platform = enabledPlatforms[currentPlatformIndex % enabledPlatforms.length];
            
            // Animação da logo
            logoContainer.classList.add('animate');
            setTimeout(() => {
                logoContainer.classList.remove('animate');
            }, 500);
            
            // Atualiza classes CSS
            streamBar.className = `stream-bar ${platform.name}`;
            
            // Atualiza conteúdo
            username.textContent = platform.username;
            platformLogo.innerHTML = platform.logo;
            
            // Próxima plataforma
            currentPlatformIndex = (currentPlatformIndex + 1) % enabledPlatforms.length;
        }

        function updateTrophyCounter() {
            trophyCounter.textContent = `${currentTrophy}/${maxTrophy}`;
            
            // Animação de incremento
            trophyCounter.classList.add('animate');
            setTimeout(() => {
                trophyCounter.classList.remove('animate');
            }, 300);
            
            // Broadcast para outras abas
            broadcastUpdate({ currentTrophy, maxTrophy });
        }

        function updateDeathCounter() {
            deathCounter.textContent = deathCount;
            
            // Animação de incremento
            deathCounter.classList.add('animate');
            setTimeout(() => {
                deathCounter.classList.remove('animate');
            }, 300);
            
            // Broadcast para outras abas
            broadcastUpdate({ deathCount });
        }

        // Rotação automática das plataformas
        setInterval(updatePlatform, 5000);

        // Atalhos de teclado
        document.addEventListener('keydown', function(event) {
            if (event.metaKey || event.ctrlKey) {
                if (event.shiftKey) {
                    // Atalhos com SHIFT
                    switch(event.key) {
                        case ']':
                            event.preventDefault();
                            if (deathCount < 999) {
                                deathCount++;
                                updateDeathCounter();
                            }
                            break;
                        case '\\':
                            event.preventDefault();
                            deathCount = 0;
                            updateDeathCounter();
                            break;
                    }
                } else {
                    // Atalhos sem SHIFT
                    switch(event.key) {
                        case '[':
                            event.preventDefault();
                            if (currentTrophy < 99) {
                                currentTrophy++;
                                updateTrophyCounter();
                            }
                            break;
                        case ']':
                            event.preventDefault();
                            if (maxTrophy < 99) {
                                maxTrophy++;
                                updateTrophyCounter();
                            }
                            break;
                        case '\\':
                            event.preventDefault();
                            currentTrophy = 0;
                            maxTrophy = 0;
                            updateTrophyCounter();
                            break;
                    }
                }
            }
        });

        // Renderizar plataformas dinamicamente
        function renderPlatforms() {
            const container = document.getElementById('platformControls');
            container.innerHTML = '';
            
            platforms.forEach((platform, index) => {
                const platformItem = document.createElement('div');
                platformItem.className = 'platform-item';
                platformItem.innerHTML = `
                    <svg class="platform-logo" viewBox="0 0 24 24">
                        ${platform.logo}
                    </svg>
                    <input type="text" class="username-input" id="${platform.name}User" placeholder="@usuario" value="${platform.username}">
                    <div class="toggle-switch ${platform.enabled ? 'active' : ''}" id="${platform.name}Toggle">
                        <div class="toggle-slider"></div>
                    </div>
                    ${platforms.length > 1 ? `<button class="counter-btn remove-platform-btn" data-index="${index}">×</button>` : ''}
                `;
                container.appendChild(platformItem);
            });
            
            setupPlatformControls();
        }

        // Controles de plataforma
        function setupPlatformControls() {
            platforms.forEach((platform, index) => {
                const userInput = document.getElementById(`${platform.name}User`);
                const toggle = document.getElementById(`${platform.name}Toggle`);
                
                if (userInput) {
                    userInput.addEventListener('input', (e) => {
                        platforms[index].username = e.target.value;
                    });
                }
                
                if (toggle) {
                    toggle.addEventListener('click', () => {
                        platforms[index].enabled = !platforms[index].enabled;
                        toggle.classList.toggle('active', platforms[index].enabled);
                    });
                }
            });
            
            // Botões de remover plataforma
            document.querySelectorAll('.remove-platform-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    platforms.splice(index, 1);
                    renderPlatforms();
                });
            });
        }

        // Aplicar usuário global
        function setupGlobalUsername() {
            const globalInput = document.getElementById('globalUsername');
            const applyBtn = document.getElementById('applyAllBtn');
            
            applyBtn.addEventListener('click', () => {
                const username = globalInput.value.trim();
                if (username) {
                    platforms.forEach((platform, index) => {
                        platform.username = username;
                        const input = document.getElementById(`${platform.name}User`);
                        if (input) input.value = username;
                    });
                    globalInput.value = '';
                }
            });
        }

        // Adicionar nova plataforma
        function setupAddPlatform() {
            const addBtn = document.getElementById('addPlatformBtn');
            const nameInput = document.getElementById('newPlatformName');
            const userInput = document.getElementById('newPlatformUser');
            const colorInput = document.getElementById('newPlatformColor');
            
            addBtn.addEventListener('click', () => {
                const name = nameInput.value.trim().toLowerCase().replace(/\s+/g, '');
                const username = userInput.value.trim();
                const color = colorInput.value.trim();
                
                if (name && username && color) {
                    // Verificar se já existe
                    if (platforms.find(p => p.name === name)) {
                        alert('Plataforma já existe!');
                        return;
                    }
                    
                    const newPlatform = {
                        name: name,
                        username: username,
                        enabled: true,
                        logo: `<circle cx="12" cy="12" r="10" fill="${color}"/><text x="12" y="16" text-anchor="middle" fill="white" font-size="8" font-weight="bold">${name.charAt(0).toUpperCase()}</text>`,
                        color: color
                    };
                    
                    platforms.push(newPlatform);
                    
                    // Adicionar CSS para nova plataforma
                    const style = document.createElement('style');
                    style.textContent = `.stream-bar.${name} { background: linear-gradient(90deg, ${color} 0%, ${adjustColor(color, -20)} 100%); }`;
                    document.head.appendChild(style);
                    
                    renderPlatforms();
                    
                    // Limpar inputs
                    nameInput.value = '';
                    userInput.value = '';
                    colorInput.value = '#6c5ce7';
                }
            });
        }

        // Função para ajustar cor
        function adjustColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // Controles de contador de mortes
        function setupDeathControls() {
            const deathInput = document.getElementById('deathInput');
            const deathPlus = document.getElementById('deathPlus');
            const deathMinus = document.getElementById('deathMinus');
            const deathReset = document.getElementById('deathReset');
            
            deathInput.addEventListener('input', (e) => {
                deathCount = Math.max(0, Math.min(999, parseInt(e.target.value) || 0));
                updateDeathCounter();
            });
            
            deathPlus.addEventListener('click', () => {
                if (deathCount < 999) {
                    deathCount++;
                    deathInput.value = deathCount;
                    updateDeathCounter();
                }
            });
            
            deathMinus.addEventListener('click', () => {
                if (deathCount > 0) {
                    deathCount--;
                    deathInput.value = deathCount;
                    updateDeathCounter();
                }
            });
            
            deathReset.addEventListener('click', () => {
                deathCount = 0;
                deathInput.value = deathCount;
                updateDeathCounter();
            });
        }

        // Controles de contador de troféus
        function setupTrophyControls() {
            const trophyCurrentInput = document.getElementById('trophyCurrentInput');
            const trophyMaxInput = document.getElementById('trophyMaxInput');
            const trophyCurrentPlus = document.getElementById('trophyCurrentPlus');
            const trophyCurrentMinus = document.getElementById('trophyCurrentMinus');
            const trophyMaxPlus = document.getElementById('trophyMaxPlus');
            const trophyMaxMinus = document.getElementById('trophyMaxMinus');
            const trophyReset = document.getElementById('trophyReset');
            
            // Inputs
            trophyCurrentInput.addEventListener('input', (e) => {
                currentTrophy = Math.max(0, Math.min(99, parseInt(e.target.value) || 0));
                updateTrophyCounter();
            });
            
            trophyMaxInput.addEventListener('input', (e) => {
                maxTrophy = Math.max(0, Math.min(99, parseInt(e.target.value) || 0));
                updateTrophyCounter();
            });
            
            // Botões troféu atual
            trophyCurrentPlus.addEventListener('click', () => {
                if (currentTrophy < 99) {
                    currentTrophy++;
                    trophyCurrentInput.value = currentTrophy;
                    updateTrophyCounter();
                }
            });
            
            trophyCurrentMinus.addEventListener('click', () => {
                if (currentTrophy > 0) {
                    currentTrophy--;
                    trophyCurrentInput.value = currentTrophy;
                    updateTrophyCounter();
                }
            });
            
            // Botões troféu máximo
            trophyMaxPlus.addEventListener('click', () => {
                if (maxTrophy < 99) {
                    maxTrophy++;
                    trophyMaxInput.value = maxTrophy;
                    updateTrophyCounter();
                }
            });
            
            trophyMaxMinus.addEventListener('click', () => {
                if (maxTrophy > 0) {
                    maxTrophy--;
                    trophyMaxInput.value = maxTrophy;
                    updateTrophyCounter();
                }
            });
            
            // Reset
            trophyReset.addEventListener('click', () => {
                currentTrophy = 0;
                maxTrophy = 0;
                trophyCurrentInput.value = currentTrophy;
                trophyMaxInput.value = maxTrophy;
                updateTrophyCounter();
            });
        }

        // Sistema de abas
        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;
                    
                    // Remover active de todos
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Ativar o selecionado
                    button.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        }

        // Modo OBS e Dock
        function setupModes() {
            const obsModeBtn = document.getElementById('obsMode');
            const dockModeBtn = document.getElementById('dockMode');
            let isObsMode = isObsModeFromUrl;
            let isDockMode = isDockModeFromUrl;
            
            // Aplicar estado inicial se veio da URL
            if (isObsModeFromUrl) {
                obsModeBtn.textContent = '🔧 Modo Edição';
                document.body.style.justifyContent = 'center';
                document.body.style.alignItems = 'center';
                document.body.style.height = '100vh';
            }
            
            if (isDockModeFromUrl) {
                dockModeBtn.textContent = '📺 Modo Normal';
            }
            
            obsModeBtn.addEventListener('click', () => {
                isObsMode = !isObsMode;
                document.body.classList.toggle('obs-mode', isObsMode);
                
                if (isObsMode) {
                    obsModeBtn.textContent = '🔧 Modo Edição';
                    // Atualizar URL
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('obs', 'true');
                    window.history.replaceState({}, '', newUrl);
                    
                    // Centraliza a barra na tela
                    document.body.style.justifyContent = 'center';
                    document.body.style.alignItems = 'center';
                    document.body.style.height = '100vh';
                } else {
                    obsModeBtn.textContent = '🎥 Modo OBS';
                    // Remover parâmetro da URL
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.delete('obs');
                    window.history.replaceState({}, '', newUrl);
                    
                    // Volta ao layout normal
                    document.body.style.justifyContent = '';
                    document.body.style.alignItems = '';
                    document.body.style.height = '';
                }
            });
            
            dockModeBtn.addEventListener('click', () => {
                isDockMode = !isDockMode;
                document.body.classList.toggle('dock-mode', isDockMode);
                
                if (isDockMode) {
                    dockModeBtn.textContent = '📺 Modo Normal';
                    // Atualizar URL
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('dock', 'true');
                    window.history.replaceState({}, '', newUrl);
                } else {
                    dockModeBtn.textContent = '🔧 Modo Dock';
                    
                    // Remover parâmetro da URL
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.delete('dock');
                    window.history.replaceState({}, '', newUrl);
                }
            });
        }

        // Inicialização
        updateTrophyCounter();
        updateDeathCounter();
        renderPlatforms();
        setupGlobalUsername();
        setupAddPlatform();
        setupDeathControls();
        setupTrophyControls();
        setupTabs();
        setupModes();
        listenForUpdates();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9791158141a7f202',t:'MTc1Njg1ODg1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
